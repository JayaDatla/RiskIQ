<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RiskIQ - Advanced Risk Analysis Platform</title>
    <link rel="stylesheet" href="/static/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-chart-line"></i>
                <h1>RiskIQ</h1>
            </div>
            <p class="subtitle">Advanced Risk Analysis & Portfolio Management</p>
        </header>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <button class="tab-btn active" data-tab="single">
                <i class="fas fa-chart-bar"></i>
                Single Stock Analysis
            </button>
            <button class="tab-btn" data-tab="portfolio">
                <i class="fas fa-briefcase"></i>
                Portfolio Analysis
            </button>
        </nav>

        <!-- Single Stock Analysis Tab -->
        <div id="single-tab" class="tab-content active">
            <div class="analysis-section">
                <div class="input-section">
                    <h2>Stock Risk Analysis</h2>
                    <div class="input-group">
                        <input type="text" id="ticker-input" placeholder="Enter stock ticker (e.g., AAPL, MSFT, TSLA)"
                            maxlength="10">
                        <button id="analyze-btn" class="btn-primary">
                            <i class="fas fa-search"></i>
                            Analyze Risk
                        </button>
                    </div>
                    <div class="loading" id="single-loading" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                        Analyzing risk metrics...
                    </div>
                </div>

                <div id="single-results" class="results-section" style="display: none;">
                    <!-- Risk Level Badge -->
                    <div class="risk-level-section">
                        <h3>Risk Assessment</h3>
                        <div id="risk-badge" class="risk-badge"></div>
                    </div>

                    <!-- Key Metrics Cards -->
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <div class="metric-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="metric-content">
                                <h4>Historical Volatility</h4>
                                <div id="hist-vol" class="metric-value">-</div>
                                <p class="metric-desc">Annualized volatility</p>
                            </div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="metric-content">
                                <h4>Value at Risk (95%)</h4>
                                <div id="var-95" class="metric-value">-</div>
                                <p class="metric-desc">Maximum expected daily loss</p>
                            </div>
                        </div>

                        <div class="metric-card">
                            <div class="metric-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="metric-content">
                                <h4>Conditional VaR (95%)</h4>
                                <div id="cvar-95" class="metric-value">-</div>
                                <p class="metric-desc">Average loss in worst scenarios</p>
                            </div>
                        </div>
                    </div>

                    <!-- Volatility Forecasts -->
                    <div class="forecast-section">
                        <h3>Volatility Forecasts</h3>
                        <div class="forecast-grid">
                            <div class="forecast-card">
                                <h4>GARCH Model</h4>
                                <div id="garch-forecast" class="forecast-value">-</div>
                            </div>
                            <div class="forecast-card">
                                <h4>XGBoost Model</h4>
                                <div id="xgboost-forecast" class="forecast-value">-</div>
                            </div>
                            <div class="forecast-card">
                                <h4>LSTM Model</h4>
                                <div id="lstm-forecast" class="forecast-value">-</div>
                            </div>
                        </div>
                    </div>

                    <!-- Price Chart -->
                    <div class="chart-section">
                        <h3>Price History & Returns</h3>
                        <canvas id="price-chart" width="400" height="200"></canvas>
                    </div>

                    <!-- AI Summary -->
                    <div class="summary-section">
                        <h3>AI Risk Analysis</h3>
                        <div id="ai-summary" class="summary-content"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Portfolio Analysis Tab -->
        <div id="portfolio-tab" class="tab-content">
            <div class="analysis-section">
                <div class="input-section">
                    <h2>Portfolio Risk Analysis</h2>
                    <div class="input-group">
                        <textarea id="tickers-input"
                            placeholder="Enter stock tickers separated by commas (e.g., AAPL, MSFT, GOOGL, TSLA, AMZN)"
                            rows="3"></textarea>
                        <button id="analyze-portfolio-btn" class="btn-primary">
                            <i class="fas fa-briefcase"></i>
                            Analyze Portfolio
                        </button>
                    </div>
                    <div class="loading" id="portfolio-loading" style="display: none;">
                        <i class="fas fa-spinner fa-spin"></i>
                        Analyzing portfolio risk...
                    </div>
                </div>

                <div id="portfolio-results" class="results-section" style="display: none;">
                    <!-- Portfolio Risk Level -->
                    <div class="risk-level-section">
                        <h3>Portfolio Risk Assessment</h3>
                        <div id="portfolio-risk-badge" class="risk-badge"></div>
                    </div>

                    <!-- Portfolio Summary -->
                    <div class="portfolio-summary">
                        <h3>Portfolio Summary</h3>
                        <div class="summary-stats">
                            <div class="stat-item">
                                <span class="stat-label">Number of Securities:</span>
                                <span id="portfolio-count" class="stat-value">-</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Average Volatility:</span>
                                <span id="avg-volatility" class="stat-value">-</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Average VaR (95%):</span>
                                <span id="avg-var" class="stat-value">-</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Average CVaR (95%):</span>
                                <span id="avg-cvar" class="stat-value">-</span>
                            </div>
                        </div>
                    </div>

                    <!-- Individual Stock Analysis -->
                    <div class="stocks-analysis">
                        <h3>Individual Stock Analysis</h3>
                        <div id="stocks-grid" class="stocks-grid"></div>
                    </div>

                    <!-- Portfolio Chart -->
                    <div class="chart-section">
                        <h3>Risk Distribution</h3>
                        <canvas id="portfolio-chart" width="400" height="200"></canvas>
                    </div>

                    <!-- Portfolio AI Summary -->
                    <div class="summary-section">
                        <h3>Portfolio Risk Analysis</h3>
                        <div id="portfolio-ai-summary" class="summary-content"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Error Modal -->
        <div id="error-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h3>Error</h3>
                <p id="error-message"></p>
            </div>
        </div>

        <!-- Education: Understanding the Metrics -->
        <section class="analysis-section" style="margin-top: 24px;">
            <h2>Understanding the Metrics</h2>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-icon"><i class="fas fa-wave-square"></i></div>
                    <div class="metric-content">
                        <h4>Volatility</h4>
                        <p class="metric-desc">How much a stock typically swings. Higher volatility means larger
                            day‑to‑day price moves. If volatility is 25% (annualised), daily swings are roughly ±1.5% on
                            average.</p>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon"><i class="fas fa-arrow-down"></i></div>
                    <div class="metric-content">
                        <h4>VaR (95%)</h4>
                        <p class="metric-desc">Value at Risk estimates a typical worst‑case one‑day loss with 95%
                            confidence. If VaR is 2%, there’s a 1 in 20 chance losses exceed 2% on a given day.</p>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon"><i class="fas fa-fire"></i></div>
                    <div class="metric-content">
                        <h4>CVaR (95%)</h4>
                        <p class="metric-desc">Conditional VaR (Expected Shortfall) is the average loss on the worst 5%
                            of days. If CVaR is 3%, those bad days average ~3% loss.</p>
                    </div>
                </div>
                <div class="metric-card">
                    <div class="metric-icon"><i class="fas fa-robot"></i></div>
                    <div class="metric-content">
                        <h4>Forecasted Volatility</h4>
                        <p class="metric-desc">Model predictions (GARCH, XGBoost, LSTM) of near‑term risk. Compare to
                            current volatility to see if risk is increasing, decreasing, or stable.</p>
                    </div>
                </div>
            </div>
            <div class="summary-section" style="margin-top:16px;">
                <h3>How to Use This</h3>
                <div class="summary-content">
                    Use position sizes that align with your risk comfort. Example: with a $10,000 position and VaR=2%, a
                    typical worst‑case day is ~$200. If that exceeds your comfort, size down or use risk controls
                    (stops, gradual entries).
                </div>
            </div>
        </section>
    </div>

    <script src="/static/script.js"></script>
</body>

</html>